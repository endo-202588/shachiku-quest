.min-h-screen.bg-gradient-to-br.from-purple-100.to-blue-100.flex.items-center.justify-center.p-4
  .max-w-4xl.w-full.space-y-6
    / ========== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ  ========== /
    .bg-white.rounded-lg.shadow-xl.p-8
      h1.text-3xl.font-bold.text-center.mb-6.text-purple-600
        | âœï¸ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç·¨é›†

      = form_with model: @status, url: status_path(@status), method: :patch, local: true, data: { turbo: false }, class: "space-y-6" do |f|
        / ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        - if @status.errors.any?
          .bg-red-50.border.border-red-200.rounded-lg.p-4
            h3.text-red-800.font-bold.mb-2 ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ
            ul.list-disc.list-inside.text-red-600
              - @status.errors.full_messages.each do |message|
                li = message

        / æ—¥ä»˜è¡¨ç¤º(ç·¨é›†æ™‚ã¯å¤‰æ›´ä¸å¯)
        div
          = f.label :status_date, "ğŸ“† æ—¥ä»˜", class: "block text-sm font-bold text-gray-700 mb-2"
          = f.date_field :status_date, value: @target_date, readonly: true, class: "w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"
          .mt-2.text-sm.text-gray-600
            | â€» ç·¨é›†æ™‚ã¯æ—¥ä»˜ã‚’å¤‰æ›´ã§ãã¾ã›ã‚“

        / ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é¸æŠ
        div
          = f.label :status_type, "âš”ï¸ ä»Šæ—¥ã®çŠ¶æ…‹", class: "block text-sm font-bold text-gray-700 mb-2"
          .space-y-2
            - Status.status_types.keys.each do |status_key|
              label.flex.items-center.p-3.border.rounded-lg.cursor-pointer.hover:bg-purple-50.transition class=("bg-purple-50 border-purple-300" if @status.status_type == status_key)
                = f.radio_button :status_type, status_key, class: "mr-3"
                span.text-lg
                  = Status.human_attribute_name("status_type.#{status_key}")

        / ãƒ¡ãƒ¢
        div
          = f.label :memo, "ğŸ“ ãƒ¡ãƒ¢(ä»»æ„)", class: "block text-sm font-bold text-gray-700 mb-2"
          = f.text_area :memo, rows: 3, placeholder: "æ°—åˆ†ã‚„çŠ¶æ³ã‚’è‡ªç”±ã«æ›¸ã„ã¦ãã ã•ã„...", class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"

        / é€ä¿¡ãƒœã‚¿ãƒ³
        div
          = f.submit "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°", class: "w-full bg-purple-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-purple-700 transition duration-200 cursor-pointer"

      / ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒªãƒ³ã‚¯
      .text-center.mt-4
        = link_to "â† æˆ»ã‚‹", users_path, class: "text-gray-600 hover:text-gray-800"

    / ========== æ›´æ–°å±¥æ­´ã‚»ã‚¯ã‚·ãƒ§ãƒ³(ã“ã“ã‹ã‚‰è¿½åŠ !) ========== /
    .bg-white.rounded-lg.shadow-xl.p-8
      / ãƒ˜ãƒƒãƒ€ãƒ¼
      .flex.justify-between.items-center.mb-6
        h2.text-2xl.font-bold.text-gray-800
          | ğŸ“œ æ›´æ–°å±¥æ­´
        - if @status.status_histories.any?
          span.text-sm.text-gray-500.bg-gray-100.px-3.py-1.rounded-full
            | å…¨#{@status.status_histories.count}å›

      / å±¥æ­´ä¸€è¦§
      - if @status_histories.any?
        .space-y-4
          - @status_histories.each do |history|
            .border.border-gray-200.rounded-lg.p-4.hover:bg-gray-50.transition
              / æ—¥æ™‚ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´
              .flex.justify-between.items-start.mb-2
                .text-sm.text-gray-500
                  | ğŸ• #{history.created_at.strftime('%Yå¹´%mæœˆ%dæ—¥ %H:%M')}

                / ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´è¡¨ç¤º
                .flex.items-center.space-x-2
                  - if history.old_status_type.present?
                    span.px-2.py-1.rounded.text-xs.font-semibold.bg-gray-200.text-gray-700
                      = Status.human_attribute_name("status_type.#{history.old_status_type}")
                    span.text-gray-400 â†’
                  span.px-2.py-1.rounded.text-xs.font-semibold.bg-purple-100.text-purple-700
                    = Status.human_attribute_name("status_type.#{history.new_status_type}")

              / æ›´æ–°è€…
              .text-sm.text-gray-600
                | ğŸ‘¤ æ›´æ–°è€…: #{history.user.decorate.full_name}

              / ã‚³ãƒ¡ãƒ³ãƒˆ(ã‚ã‚Œã°)
              - if history.comment.present?
                .mt-2.text-sm.text-gray-700.bg-blue-50.p-2.rounded
                  | ğŸ’¬ #{history.comment}

        / ã‚‚ã£ã¨è¦‹ã‚‹ãƒªãƒ³ã‚¯(5ä»¶ä»¥ä¸Šã‚ã‚‹å ´åˆ)
        - if @status.status_histories.count > 5
          .text-center.mt-4.pt-4.border-t
            = link_to status_histories_path(@status), class: "text-purple-600 hover:text-purple-800 font-semibold text-sm" do
              | å…¨ã¦ã®å±¥æ­´ã‚’è¦‹ã‚‹(#{@status.status_histories.count}ä»¶) â†’

      - else
        / å±¥æ­´ãŒãªã„å ´åˆ
        .text-center.py-12.text-gray-400
          .text-4xl.mb-4 ğŸ“­
          .text-lg ã¾ã æ›´æ–°å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“
          .text-sm.mt-2 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã¨å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
