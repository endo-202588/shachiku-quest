.container.mx-auto.px-4.py-8
  h1.text-2xl.font-bold.mb-6 ãƒ˜ãƒ«ãƒ—è¦è«‹ä¸€è¦§

  / ========== ãƒ˜ãƒ«ãƒ—ä¸­ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæœ€å¤§1ä»¶ï¼‰ ==========
  - if current_user&.helper? && @current_help_request.present? && @helping_task.present?
    .mb-8
      .flex.items-center.justify-between.mb-4.border-b.pb-2
        h2.text-xl.font-semibold
          | ğŸ§¹ ãƒ˜ãƒ«ãƒ—ä¸­ã®ã‚¿ã‚¹ã‚¯
        span.text-sm.text-gray-500
          | ï¼ˆç¾åœ¨1ä»¶ï¼‰

      .bg-green-50.rounded-lg.p-6.border.border-green-200.shadow-sm
        .flex.justify-between.items-start.mb-3
          .flex-1
            h3.font-bold.text-lg.mb-2 = @helping_task.title
            p.text-gray-700 = @helping_task.description

          .ml-4
            = @helping_task.status_badge_html

        .flex.gap-6.text-sm.text-gray-600.mb-3
          .flex.items-center.gap-1
            i.fas.fa-user
            = @helping_task.user.decorate.full_name

          - if @helping_task.required_time_with_icon
            = @helping_task.required_time_with_icon

        / ãƒ˜ãƒ«ãƒ—è¦è«‹ã®çŠ¶æ…‹è¡¨ç¤ºï¼ˆæ—¢å­˜ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Œã°æµç”¨ï¼‰
        - if @helping_task.help_request.present?
          p.text-gray-700 = @helping_task.help_request_status_html

        .flex.gap-2.justify-end
          = link_to 'ğŸ” è©³ç´°ã‚’è¦‹ã‚‹',
            help_request_path(@current_help_request),
            class: 'px-4 py-2 bg-white border border-green-300 text-green-800 rounded hover:bg-green-100 transition'

          / å°†æ¥ï¼šè©³ç´°ãƒšãƒ¼ã‚¸ã«ç½®ãæƒ³å®šã ã‘ã©ã€ã“ã“ã«ä»®ã§ç½®ããªã‚‰ã“ã‚Œ
          / = button_to 'âœ… å®Œäº†é€šçŸ¥', complete_notify_help_request_path(@current_help_request), method: :post, data: { turbo: false },
          /   class: 'px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition'

  / ========== ãƒ˜ãƒ«ãƒ‘ãƒ¼ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ==========
  .mb-8
    h2.text-xl.font-semibold.mb-4.border-b.pb-2 åˆ©ç”¨å¯èƒ½ãªãƒ˜ãƒ«ãƒ‘ãƒ¼

    - if @helpers.present?
      .grid.grid-cols-1.md:grid-cols-2.lg:grid-cols-3.gap-4
        - @helpers.each do |helper|
          .bg-blue-50.rounded-lg.p-4.border.border-blue-200
            .flex.items-center.gap-3
              / ã‚¢ã‚¤ã‚³ãƒ³éƒ¨åˆ†
              .w-10.h-10.bg-blue-500.rounded-full.flex.items-center.justify-center.text-white.font-bold
                = helper.last_name[0]

              / åå‰è¡¨ç¤º(UserDecoratorã®full_nameã‚’ä½¿ç”¨)
              .flex-1
                p.font-bold.text-lg = helper.decorate.full_name

              / å¿…è¦æ™‚é–“(TaskDecoratorã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨)
              - if helper.available_time_with_icon
                .ml-auto
                  = helper.available_time_with_icon
            .mt-3
              - if helper.decorate.helping_now?
                .block.w-full.text-center.bg-gray-400.text-white.font-bold.py-2.px-4.rounded
                  | ğŸ§¹ ãŠæ‰‹ä¼ã„ä¸­
              - else
                = link_to select_task_helper_path(helper),
                          class: 'block w-full text-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-200' do
                  | ğŸ¤ ä»²é–“ã«åŠ ãˆã‚‹
    - else
      .bg-gray-100.rounded-lg.p-6.text-center.text-gray-600
        p ç¾åœ¨åˆ©ç”¨å¯èƒ½ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯ã„ã¾ã›ã‚“

  / ========== ã‚¿ã‚¹ã‚¯ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ==========
  .mb-8
    / è¦‹å‡ºã—ã¨ãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ã«é…ç½®
    .flex.justify-between.items-center.mb-4.border-b.pb-2
      h2.text-xl.font-semibold ãƒ˜ãƒ«ãƒ—è¦è«‹ã‚¿ã‚¹ã‚¯
      = link_to 'é­”æ³•ã‚’ç™»éŒ²', new_help_magic_path, class: 'px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition'

    - if @tasks.present?
      .space-y-4
        - @tasks.each do |task|
          .bg-white.rounded-lg.p-6.border.shadow-sm
            / ã‚¿ã‚¹ã‚¯æƒ…å ±
            .flex.justify-between.items-start.mb-3
              .flex-1
                h3.font-bold.text-lg.mb-2 = task.title
                - if task.description.present?
                .bg-yellow-50.rounded.p-3.mb-3
                  p.text-sm.text-gray-600.mt-1 = task.description

              / ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸(TaskDecoratorã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨)
              .ml-4
                = task.status_badge_html

            / ã‚¿ã‚¹ã‚¯ã®è©³ç´°æƒ…å ±
            .flex.gap-6.text-sm.text-gray-600.mb-3
              / ãƒ¦ãƒ¼ã‚¶ãƒ¼å(UserDecoratorã®full_nameã‚’ä½¿ç”¨)
              .flex.items-center.gap-1
                i.fas.fa-user
                = task.user.decorate.full_name

              / å¿…è¦æ™‚é–“(TaskDecoratorã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨)
              - if task.required_time_with_icon
                = task.required_time_with_icon

              p.text-gray-700 = task.help_request_status_html

            .flex.gap-2.justify-end
              - if current_user&.helper?
                - if task.user_id == current_user.id
                  .px-4.py-2.bg-gray-200.text-gray-600.rounded.text-sm
                    | ğŸ™… è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã§ã™
                - elsif task.user_id != current_user.id && task.help_request&.open? && task.help_request.helper_id.nil?
                  = button_to 'ğŸ¤ ã“ã®ä»•äº‹ã®ä»²é–“ã«ãªã‚‹',
                    apply_help_request_path(task.help_request),
                    method: :post,
                    data: { turbo: false },
                    class: 'px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition'
                - else
                  .px-4.py-2.bg-gray-400.text-white.rounded.text-sm
                    | ğŸ§¹ å‹Ÿé›†çµ‚äº†
              - else
                = link_to 'é­”æ³•ã‚’ç™»éŒ²ã—ã¦å¿œå‹Ÿ', new_help_magic_path,
                  class: 'px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition'

    - else
      .bg-gray-100.rounded-lg.p-6.text-center.text-gray-600
        p ç¾åœ¨ãƒ˜ãƒ«ãƒ—è¦è«‹ã¯ã‚ã‚Šã¾ã›ã‚“
